define(["ko","mage/url","uiComponent","Magento_Customer/js/customer-data","GamSdk",],function(ko,url,Component,customerData,gamSdk){"use strict";return Component.extend({defaults:{template:"Bounteous_Gam/gam-links",},hrefOrders:ko.observable(url.build("sales/order/history")),hrefLogin:ko.observable(url.build("customer/account/login")),hrefCreate:ko.observable(url.build("customer/account/create")),isLoggedIn:ko.observable(false),customerName:ko.observable(""),initialize:function(){var self=this;self._super();self.initSdk();self.subscribe();},initSdk:function(){var self=this;self.sdk=gamSdk.getSdk();},subscribe:function(){var self=this,customer=customerData.get("customer");customer.subscribe(function(data){if(data.firstname){self.customerName(data.firstname);self.isLoggedIn(true);}},this);self.reloadCustomerData();},reloadCustomerData:function(){customerData.invalidate(["customer"]);return customerData.reload(["customer"],true);},signIn:function(){localStorage.setItem("gam_referrer",window.location.href);window.location.href=url.build("customer/account/login");},signUp:function(){localStorage.setItem("gam_referrer",window.location.href);window.location.href=url.build("customer/account/create");},signOut:function(){fetch(url.build("customer/account/logout"),{method:"GET",credentials:"include",}).then((response)=>{if(response.ok){localStorage.removeItem("gam_referrer");return this.sdk.signOutRedirect();}}).catch((error)=>{console.error("logout error:",error);});},});});