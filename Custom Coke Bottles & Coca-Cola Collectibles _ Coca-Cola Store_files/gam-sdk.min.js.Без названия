define([],function(){"use strict";var sdk,isInitialized=false;async function initialize(config){if(isInitialized){console.warn("GAM SDK is already initialized.");return sdk;}
try{sdk=await window.cds(config);isInitialized=true;document.dispatchEvent(new Event("gam-ready"));document.addEventListener("click",function(event){if(!event.target.closest(".gam-edit"))return;event.preventDefault();return sdk.editAccountRedirect();},false);if(window.location.pathname==="/token-exchange"){var active=await sdk.hasActiveAccount();var accessToken=await sdk.getAccessToken();if(active&&accessToken){window.location.href="/customer/account";}}
var qs=new URLSearchParams(window.location.search),prompt=qs.get("prompt"),isMagicLink=qs.get("is_magic_link"),id_token_hint=qs.get("id_token_hint");if(isMagicLink&&isMagicLink==="go"){await sdk.signInRedirect({prompt,isMagicLink,id_token_hint,});}}catch(error){console.error("Error initializing GAM SDK:",error);}}
function getSdk(){if(!isInitialized){console.warn("Trying to get GAM SDK before initialization.");}
return sdk;}
return{initialize:initialize,getSdk:getSdk,};});