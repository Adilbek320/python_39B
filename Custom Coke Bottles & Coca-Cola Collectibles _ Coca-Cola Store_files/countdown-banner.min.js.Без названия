define(["jquery"],function($){"use strict";$.widget("coke.countdownBanner",{_create:function(){var self=this;var timeLeft=self._getTimeLeft();if(timeLeft.total>0){$("#coke_countdown_banner").css("display","block");self._startCountdown();}
if(self.options.theme==="snow"){self._makeSnow();}},_startCountdown:function(){var self=this;self._updateTicker();self.countdown=setInterval(self._updateTicker.bind(this),1000);},_updateTicker:function(){var self=this;var timeLeft=self._getTimeLeft();if(timeLeft.total<0){clearInterval(self.countdown);return $("#coke_countdown_banner").slideUp();}
$("#cd_days").text(timeLeft.days);$("#cd_hours").text(timeLeft.hours);$("#cd_minutes").text(timeLeft.minutes);$("#cd_seconds").text(timeLeft.seconds);},_getTimeLeft:function(){var self=this,endDate=self.options.date.replace(/-/g,"/"),currentDate=new Date(),time=Date.parse(endDate)-
Date.parse(currentDate.toLocaleString("en-US",{timeZone:"America/New_York",}));return{total:time,days:Math.floor(time /(1000*60*60*24)),hours:Math.floor((time /(1000*60*60))%24),minutes:Math.floor((time / 1000 / 60)%60),seconds:Math.floor((time / 1000)%60),};},_random:function(min,max){return Math.random()*(max-min)+min;},_makeSnow:function(){var self=this;var snow=document.getElementById("snow");var snowflakes=75;for(var i=0;i<snowflakes;i++){var snowflake=document.createElementNS("http://www.w3.org/2000/svg","circle");snowflake.setAttribute("cx",self._random(1,100)+"%");snowflake.setAttribute("cy","-"+self._random(1,100));snowflake.setAttribute("r",self._random(1,3));snow.appendChild(snowflake);}},});return $.coke.countdownBanner;});