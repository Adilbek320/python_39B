define(["jquery","dataServicesBase","magentoStorefrontEvents"],function($,dataServicesBase,magentoStorefrontEvents){"use strict";$.widget("mage.customSearch",{options:{form:"#search_mini_form",input:"#search",container:"#search_bar",toggle:".search-toggle",clear:".search-input > .action--clear",icon:".header-icon--search",},_create:function(){var self=this;self._cacheSelectors();self._initAutocomplete();self._bindEvents();},_cacheSelectors:function(){var self=this;self.form=$(self.options.form);self.input=$(self.options.input);self.container=$(self.options.container);self.toggle=$(self.options.toggle);self.clear=$(self.options.clear);self.icon=$(self.options.icon);},_initAutocomplete:function(){var self=this,script=self.options.popoverUrl,searchConfig=self.options.searchConfig;if(script){require([script],function(){new window.LiveSearchAutocomplete({environmentId:searchConfig.environmentId,websiteCode:searchConfig.websiteCode,storeCode:searchConfig.storeCode,storeViewCode:searchConfig.storeViewCode,config:searchConfig.config,context:searchConfig.context,});});}
if(magentoStorefrontEvents){magentoStorefrontEvents.context.setSearchExtension({version:self.options.version,});}},_clearSearch:function(){var self=this;self.input.val("");},_toggleSearch:function(){var self=this;self.icon.toggleClass("active");$("#account_menu").removeClass("active");$(".header-icon--account").removeClass("active");self.container.slideToggle();},_bindEvents:function(){var self=this;self.toggle.on("click",self._toggleSearch.bind(self));self.clear.on("click",self._clearSearch.bind(self));},});return $.mage.customSearch;});